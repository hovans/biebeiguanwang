System.register(["./vendor-legacy.92ff5d757b54.chunk.js","./index-legacy.104de674e3dc.js","./formik.esm-legacy.38ad42bcc0d2.chunk.js","./LoadingButton-legacy.5bdb5fe6f4e2.chunk.js","./Masonry-legacy.86e39fdc6adf.chunk.js"],(function(e,r){"use strict";var a,n,i,t,o,l,c,s,d,p,u,m,f,h,b,w,g,_,x,y,v,k,C,S,M,B,j,L,W,q,Y,V,N,D,H,K,O,E,F,I,T,z,P,$,G,R,A,J,U,Q;return{setters:[e=>{a=e.j,n=e.aI,i=e.bA,t=e.i,o=e.n,l=e.r,c=e.ar,s=e.T,d=e.B,p=e.ah,u=e.bW,m=e.bh,f=e.ao,h=e.a9,b=e.bj,w=e.b_,g=e.an,_=e.aG,x=e.b$,y=e.c0,v=e.c1,k=e.c2,C=e.c3,S=e.bg,M=e.aj,B=e.F,j=e.bG,L=e.bl,W=e.bm,q=e.bn,Y=e.bU,V=e.bo},e=>{N=e.i,D=e.M,H=e.H,K=e.J,O=e.K,E=e.N,F=e.O,I=e.D,T=e.k,z=e.P,P=e.b},e=>{$=e.c,G=e.a,R=e.b,A=e.F,J=e.e},e=>{U=e.L},e=>{Q=e.M}],execute:function(){const r=({data:e,rowSpacing:r,columnSpacing:o,classes:l,isLoading:c,isValueLoading:s})=>a(n,{container:!0,spacing:r??2,className:l?.rowContainer,children:e.map(((e,r)=>a(n,{item:!0,xs:12,className:l?.rowItem,children:c?a(i,{variant:"text",width:"100%"}):t(n,{container:!0,spacing:o??2,className:l?.columnContainer,children:[a(n,{item:!0,xs:6,className:l?.columnItemKey,children:e.key}),a(n,{item:!0,xs:6,className:l?.columnItemValue,children:s?a(i,{variant:"text",width:"100%"}):e.value})]})},r)))}),X=()=>{const{t:e}=o(),{data:n,isLoading:i}=N(),t=l.useMemo((()=>[{key:e("profile.account-info-card.table.email",{context:"key"}),value:e("profile.account-info-card.table.email",{context:"value",email:n?.email})},{key:e("profile.account-info-card.table.plan_expired_at",{context:"key"}),value:e("profile.account-info-card.table.plan_expired_at",{context:"value",date:c.unix(n?.expired_at??0).format("YYYY-MM-DD HH:mm")})},{key:e("profile.account-info-card.table.created_at",{context:"key"}),value:e("profile.account-info-card.table.created_at",{context:"value",date:c.unix(n?.created_at??0).format("YYYY-MM-DD HH:mm")})}].map((e=>({key:a(s,{noWrap:!0,children:e.key}),value:a(s,{noWrap:!0,children:e.value})})))),[n,e]);return a(D,{title:e("profile.account-info-card.title"),children:a(r,{data:t,isValueLoading:i})})},Z=()=>{const{t:e}=o(),{data:n,isLoading:i}=N(),t=l.useMemo((()=>[{key:e("profile.wallet-card.table.balance",{context:"key"}),value:e("profile.wallet-card.table.balance",{context:"value",value:((n?.balance??0)/100).toFixed(2),count:(n?.balance??0)/100})},{key:e("profile.wallet-card.table.commission_balance",{context:"key"}),value:e("profile.wallet-card.table.commission_balance",{context:"value",value:((n?.commission_balance??0)/100).toFixed(2),count:(n?.commission_balance??0)/100})}].map((e=>({key:a(s,{noWrap:!0,children:e.key}),value:a(s,{noWrap:!0,children:e.value})})))),[n,e]);return a(D,{title:e("profile.wallet-card.title"),children:a(r,{data:t,isValueLoading:i})})},ee={old_password:"",new_password:"",confirm_password:"",submit:null},re=()=>{const{t:e}=o(),r=H(),[n]=K(),i=l.useMemo((()=>$({old_password:G().required(e("profile.change-password-card.form.old_password",{context:"required"}).toString()),new_password:G().required(e("profile.change-password-card.form.new_password",{context:"required"}).toString()).min(8,e("profile.change-password-card.form.new_password",{context:"min",count:8}).toString()),confirm_password:G().required(e("profile.change-password-card.form.confirm_password",{context:"required"}).toString()).oneOf([R("new_password")],e("profile.change-password-card.form.confirm_password",{context:"not_match"}).toString())})),[e]),c=l.useCallback((async(e,{setSubmitting:a,setStatus:i,setErrors:t})=>{try{await n(e).unwrap(),i({success:!0}),r(O())}catch(o){const e=o;console.error("Error changing password",e),i({success:!1,message:e.message}),t(e.errors||{submit:e.message})}finally{a(!1)}}),[n,r]);return a(D,{title:e("profile.change-password-card.title"),children:a(A,{initialValues:ee,validationSchema:i,onSubmit:c,children:({handleChange:r,handleBlur:n,handleSubmit:i,errors:o,touched:l,isSubmitting:c,values:h})=>a(d,{component:"form",onSubmit:i,children:t(p,{spacing:2,children:[a(u,{type:"password",id:"old_password-label",name:"old_password",label:e("profile.change-password-card.form.old_password",{context:"label"}),value:h.old_password,onChange:r,onBlur:n,error:Boolean(l.old_password&&o.old_password),helperText:l.old_password&&o.old_password,disabled:c,fullWidth:!0}),a(u,{type:"password",id:"new_password-label",name:"new_password",label:e("profile.change-password-card.form.new_password",{context:"label"}),value:h.new_password,onChange:r,onBlur:n,error:Boolean(l.new_password&&o.new_password),helperText:l.new_password&&o.new_password,disabled:c,autoComplete:"new-password",fullWidth:!0}),a(u,{type:"password",id:"confirm_password-label",name:"confirm_password",label:e("profile.change-password-card.form.confirm_password",{context:"label"}),value:h.confirm_password,onChange:r,onBlur:n,error:Boolean(l.confirm_password&&o.confirm_password),helperText:l.confirm_password&&o.confirm_password,disabled:c,autoComplete:"new-password",fullWidth:!0}),t(p,{direction:"row",justifyContent:"space-between",children:[a(d,{children:a(s,{variant:"caption",color:"error",noWrap:!0,children:o.submit})}),t(p,{direction:"row",justifyContent:"flex-end",spacing:2,children:[a(m,{type:"reset",variant:"outlined",disabled:c,children:e("profile.change-password-card.form.reset-button")}),a(m,{type:"submit",variant:"contained",disabled:c,children:c?a(f,{size:16}):e("profile.change-password-card.form.submit-button")})]})]})]})})})})},ae=()=>{const{t:e}=o(),{data:r,isLoading:n}=N(),[i]=E(),{enqueueSnackbar:c}=h(),s=l.useMemo((()=>({remind_expire:1===r?.remind_expire,remind_traffic:1===r?.remind_traffic})),[r]),u=l.useCallback((async(r,{setSubmitting:a,setStatus:n,setErrors:t})=>{try{await i({remind_expire:r.remind_expire?1:0,remind_traffic:r.remind_traffic?1:0}).unwrap(),n({success:!0}),c(e("notice::update-user",{context:"success"}),{variant:"success"})}catch(o){n({success:!1}),t(o.errors||{submit:o.message})}finally{a(!1)}}),[c,e]);return a(D,{title:e("profile.notification-card.title"),children:a(A,{initialValues:s,onSubmit:u,enableReinitialize:!0,children:({values:r,handleChange:i,handleSubmit:o,handleBlur:l,isSubmitting:c})=>a(d,{component:J,onSubmit:o,children:t(p,{spacing:2,children:[a(b,{control:a(w,{}),name:"remind_expire",checked:r.remind_expire,disabled:n||c,onChange:i,onBlur:l,label:e("profile.notification-card.expired_notify",{context:"label"}),labelPlacement:"end",sx:{m:0}}),a(b,{control:a(w,{}),name:"remind_traffic",checked:r.remind_traffic,disabled:n||c,onChange:i,onBlur:l,label:e("profile.notification-card.traffic_notify",{context:"label"}),labelPlacement:"end",sx:{m:0}}),a(p,{direction:"row",justifyContent:"flex-end",children:a(U,{variant:"contained",type:"submit",loading:n||c,children:e("profile.notification-card.save-button")})})]})})})})},ne=()=>{const{t:e}=o(),{data:r}=F(),{data:n}=I(),{data:i}=T(),c=l.useMemo((()=>g),[e]),[u,f]=_("telegram_card_init",{defaultValue:0}),[h,{inc:b,dec:w}]=x(u,{min:0,max:2});l.useEffect((()=>{f(h)}),[h]);const M=l.useMemo((()=>()=>t(p,{direction:"row",spacing:1,mt:2,children:[a(m,{onClick:()=>b(),variant:"contained",disabled:h>=2,children:e("profile.telegram-card.next_step")}),a(m,{onClick:()=>w(),variant:"text",disabled:h<=0,children:e("profile.telegram-card.previous_step")})]})),[e,h]);return a(D,{title:e("profile.telegram-card.title"),children:t(y,{activeStep:h,orientation:"vertical",children:[t(v,{children:[a(k,{children:a(s,{variant:"subtitle1",children:e("profile.telegram-card.add_bot",{context:"label"})})}),t(C,{children:[a(d,{children:a(c,{i18nKey:"profile.telegram-card.add_bot",tOptions:{context:"content",name:r?.username},children:a(S,{href:`https://t.me/${r?.username}`,target:"_blank"})})}),a(M,{})]})]}),t(v,{children:[a(k,{children:a(s,{variant:"subtitle1",children:e("profile.telegram-card.send_command",{context:"label"})})}),t(C,{children:[a(d,{children:a(c,{i18nKey:"profile.telegram-card.send_command",tOptions:{context:"content"},children:{command:`/bind ${i?.subscribe_url}`}})}),a(M,{})]})]}),t(v,{children:[a(k,{children:a(s,{variant:"subtitle1",children:e("profile.telegram-card.add_to_group",{context:"label"})})}),t(C,{children:[a(d,{children:a(s,{children:a(c,{i18nKey:"profile.telegram-card.add_to_group",tOptions:{link:n?.telegram_discuss_link,context:"content"},children:a(S,{href:n?.telegram_discuss_link,target:"_blank",rel:"noreferrer"})})})}),a(M,{})]})]})]})})},ie=()=>{const{t:e}=o(),[r,{setLeft:n,setRight:i}]=M(!1),{enqueueSnackbar:c}=h(),[s,{isLoading:d}]=z(),u=l.useCallback((async()=>{try{await s().unwrap(),c(e("notice::reset-security",{context:"success"}),{variant:"success"})}catch(r){console.error(r),c(e("notice::reset-security",{context:"failed"}),{variant:"error"})}finally{n()}}),[s,c,e,n]);return t(B,{children:[a(D,{title:e("profile.reset-subscription-card.title"),children:t(p,{spacing:2,children:[a(j,{severity:"warning",children:e("profile.reset-subscription-card.alert")}),a(m,{variant:"contained",color:"error",fullWidth:!0,onClick:i,children:e("profile.reset-subscription-card.button")})]})}),t(L,{open:r,onClose:n,"aria-labelledby":"form-dialog-title",children:[a(W,{id:"form-dialog-title",children:e("profile.reset-subscription-card.dialog.title")}),a(q,{children:a(Y,{children:e("profile.reset-subscription-card.dialog.content")})}),t(V,{children:[a(m,{onClick:n,color:"primary",children:e("profile.reset-subscription-card.dialog.cancel")}),a(U,{onClick:u,color:"error",loading:d,children:e("profile.reset-subscription-card.dialog.confirm")})]})]})]})},te=()=>t(Q,{spacing:2,columns:{xs:1,md:2,xl:3},children:[a(X,{}),a(Z,{}),a(re,{}),a(ae,{}),a(ne,{}),a(ie,{})]});e("default",(()=>(P("profile"),a(te,{}))))}}}));
