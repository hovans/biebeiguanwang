System.register(["./vendor-legacy.92ff5d757b54.chunk.js","./AuthWrapper-legacy.053921947c95.chunk.js","./formik.esm-legacy.38ad42bcc0d2.chunk.js","./index-legacy.104de674e3dc.js","./AnimateButton-legacy.7aa0a2a09c0d.chunk.js","./hey-listen.es-legacy.2cf185e905fe.chunk.js"],(function(e,i){"use strict";var r,n,a,t,o,l,s,c,d,h,m,g,u,p,b,w,y,x,f,S,v,j,k,C,B,_,I,q,A,W,D,E,F;return{setters:[e=>{r=e.b8,n=e.b9,a=e.n,t=e.aa,o=e.j,l=e.F,s=e.a$,c=e.l,d=e.B,h=e.i,m=e.aI,g=e.ah,u=e.ba,p=e.an,b=e.bb,w=e.bc,y=e.bd,x=e.be,f=e.bf,S=e.T,v=e.bg,j=e.m,k=e.bh,C=e.ao},e=>{B=e.A},e=>{_=e.F,I=e.c,q=e.a},e=>{A=e.u,W=e.a,D=e.I,E=e.b},e=>{F=e.A},null],execute:function(){const i=()=>{const[e,i]=r.useState(!1),{isLoggedIn:B}=A((e=>e.auth)),[E]=W(),z=n(),{t:K}=a("common",{keyPrefix:"login"}),[L,M]=r.useState(!1),V=()=>{M(!L)},P=e=>{e.preventDefault()},T=e=>{e.getModifierState("CapsLock")?i(!0):i(!1)},$=t();return o(l,{children:o(_,{initialValues:{email:"",password:"",submit:null},validationSchema:I().shape({email:q().email(K("email_invalid").toString()).max(255).required(K("email_required").toString()),password:q().max(255).required(K("password_required").toString())}),onSubmit:async(e,{setErrors:i,setStatus:r,setSubmitting:n})=>{try{n(!0),await E(e).unwrap().then((()=>{r({success:!0}),s.event("login",{category:"auth",label:"login",method:"email",success:!0,email:e.email}),$("/dashboard",{replace:!0})})).catch((n=>{r({success:!1}),i(c.isEmpty(n.errors)?{submit:n.message}:n.errors),s.event("login",{category:"auth",label:"login",method:"email",success:!1,error:n.message,email:e.email,values:e})})).finally((()=>{n(!1)}))}catch(a){console.error(a),z.current&&(r({success:!1}),i(c.isEmpty(a.errors)?{submit:a.message}:a.errors),n(!1))}},children:({errors:r,handleBlur:n,handleChange:a,handleSubmit:t,isSubmitting:l,touched:s,values:c})=>o(d,{component:"form",noValidate:!0,onSubmit:t,children:h(m,{container:!0,spacing:3,children:[o(m,{item:!0,xs:12,children:h(g,{spacing:1,children:[o(u,{htmlFor:"email-login",children:o(p,{children:"login.email"})}),o(b,{id:"email-login",type:"email",value:c.email,name:"email",onBlur:n,onChange:a,placeholder:K("email_placeholder").toString(),fullWidth:!0,error:Boolean(s.email&&r.email)}),s.email&&r.email&&o(w,{error:!0,id:"standard-weight-helper-text-email-login",children:r.email})]})}),o(m,{item:!0,xs:12,children:h(g,{spacing:1,children:[o(u,{htmlFor:"password-login",children:o(p,{children:"login.password"})}),o(b,{fullWidth:!0,color:e?"warning":"primary",error:Boolean(s.password&&r.password),id:"-password-login",type:L?"text":"password",value:c.password,name:"password",onBlur:e=>{i(!1),n(e)},onKeyDown:T,onChange:a,endAdornment:o(y,{position:"end",children:o(D,{"aria-label":"toggle password visibility",onClick:V,onMouseDown:P,edge:"end",color:"secondary",children:o(L?x:f,{})})}),placeholder:K("password_placeholder").toString()}),e&&o(S,{variant:"caption",sx:{color:"warning.main"},id:"warning-helper-text-password-login",children:o(p,{ns:"notice",children:"capslock_on"})}),s.password&&r.password&&o(w,{error:!0,id:"standard-weight-helper-text-password-login",children:r.password})]})}),o(m,{item:!0,xs:12,sx:{mt:-1},children:h(g,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[o(d,{}),o(v,{variant:"h6",component:j,to:B?"/auth/forgot-password":"/forgot-password",color:"text.primary",children:K("forgot_password").toString()})]})}),r.submit&&o(m,{item:!0,xs:12,children:o(w,{error:!0,children:r.submit})}),o(m,{item:!0,xs:12,children:o(F,{children:o(k,{disableElevation:!0,disabled:l,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:l?o(C,{size:24}):o(p,{i18nKey:"login.submit",children:"Submit"})})})})]})})})})};e("default",(()=>(E("login"),o(B,{children:h(m,{container:!0,spacing:3,children:[h(m,{item:!0,xs:12,container:!0,justifyContent:"center",alignItems:"center",children:[h(S,{color:"red",fontSize:"25px",children:["永久官网: ",window.config?.officialWebsite]}),h(S,{children:["当前可用: ",window.config?.website]})]}),o(m,{item:!0,xs:12,children:h(g,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[o(S,{variant:"h3",children:o(p,{children:"login.title"})}),o(S,{component:j,to:"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:o(p,{children:"login.go-register"})})]})}),o(m,{item:!0,xs:12,children:o(i,{})})]})}))))}}}));
