System.register(["./vendor-legacy.92ff5d757b54.chunk.js","./index-legacy.104de674e3dc.js"],(function(e,t){"use strict";var r,n,a,o,i,u,c,l,s,p,d,f,v,h,y,b,g,m,O;return{setters:[e=>{r=e.bp,n=e.r,a=e.bq,o=e.a9,i=e.n,u=e.j,c=e.bd,l=e.br,s=e.b8,p=e.i,d=e.F,f=e.bl,v=e.bm,h=e.an,y=e.bn,b=e.a$},e=>{g=e.f,m=e.d,O=e.I}],execute:function(){var t={},I=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),S=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),w=r&&r.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&I(t,e,r);return S(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useTurnstile=void 0;const k=w(n),x="undefined"!=typeof globalThis?globalThis:window;let _,j,C=void 0!==x.turnstile?"ready":"unloaded";const E=new Promise(((e,t)=>{j={resolve:e,reject:t},"ready"===C&&e(void 0)}));{const e="cf__reactTurnstileOnLoad",t="https://challenges.cloudflare.com/turnstile/v0/api.js";_=()=>{if("unloaded"===C){C="loading",x[e]=()=>{j.resolve(),C="ready",delete x[e]};const r=`${t}?onload=${e}&render=explicit`,n=document.createElement("script");n.src=r,n.async=!0,n.addEventListener("error",(()=>{j.reject("Failed to load Turnstile."),delete x[e]})),document.head.appendChild(n)}return E}}var P=e("_",t.default=function({id:e,className:t,style:r,sitekey:n,action:a,cData:o,theme:i,language:u,tabIndex:c,responseField:l,responseFieldName:s,size:p,fixedSize:d,retry:f,retryInterval:v,refreshExpired:h,appearance:y,execution:b,userRef:g,onVerify:m,onSuccess:O,onLoad:I,onError:S,onExpire:w,onTimeout:x,onAfterInteractive:j,onBeforeInteractive:E,onUnsupported:P}){const D=(0,k.useRef)(null),A=(0,k.useState)({onVerify:m,onSuccess:O,onLoad:I,onError:S,onExpire:w,onTimeout:x,onAfterInteractive:j,onBeforeInteractive:E,onUnsupported:P})[0],N=null!=g?g:D,T=d?{width:"compact"===p?"130px":"flexible"===p?"100%":"300px",height:"compact"===p?"120px":"65px",...r}:r;return(0,k.useEffect)((()=>{if(!N.current)return;let e=!1,t="";return(async()=>{var r,d;if("ready"!==C)try{await _()}catch(O){return void(null===(r=A.onError)||void 0===r||r.call(A,O))}if(e||!N.current)return;let g;const m={sitekey:n,action:a,cData:o,theme:i,language:u,tabindex:c,"response-field":l,"response-field-name":s,size:p,retry:f,"retry-interval":v,"refresh-expired":h,appearance:y,execution:b,callback:(e,t)=>{var r,n;null===(r=A.onVerify)||void 0===r||r.call(A,e,g),null===(n=A.onSuccess)||void 0===n||n.call(A,e,t,g)},"error-callback":e=>{var t;return null===(t=A.onError)||void 0===t?void 0:t.call(A,e,g)},"expired-callback":e=>{var t;return null===(t=A.onExpire)||void 0===t?void 0:t.call(A,e,g)},"timeout-callback":()=>{var e;return null===(e=A.onTimeout)||void 0===e?void 0:e.call(A,g)},"after-interactive-callback":()=>{var e;return null===(e=A.onAfterInteractive)||void 0===e?void 0:e.call(A,g)},"before-interactive-callback":()=>{var e;return null===(e=A.onBeforeInteractive)||void 0===e?void 0:e.call(A,g)},"unsupported-callback":()=>{var e;return null===(e=A.onUnsupported)||void 0===e?void 0:e.call(A,g)}};t=window.turnstile.render(N.current,m),g=function(e){return{execute:t=>window.turnstile.execute(e,t),reset:()=>window.turnstile.reset(e),getResponse:()=>window.turnstile.getResponse(e),isExpired:()=>window.turnstile.isExpired(e)}}(t),null===(d=A.onLoad)||void 0===d||d.call(A,t,g)})(),()=>{e=!0,t&&window.turnstile.remove(t)}}),[n,a,o,i,u,c,l,s,p,f,v,h,y,b]),(0,k.useEffect)((()=>{A.onVerify=m,A.onSuccess=O,A.onLoad=I,A.onError=S,A.onExpire=w,A.onTimeout=x,A.onAfterInteractive=j,A.onBeforeInteractive=E,A.onUnsupported=P}),[m,O,I,S,w,x,j,E,P]),k.default.createElement("div",{ref:N,id:e,className:t,style:T})});t.useTurnstile=function(){const[e,t]=(0,k.useState)(C);return(0,k.useEffect)((()=>{"ready"!==C&&E.then((()=>t(C)))}),[]),x.turnstile};var D={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==y(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(n),r=["placeholder","separator","isLastChild","ariaLabelOverride","shouldRender","inputStyle","focus","isDisabled","hasErrored","errorStyle","isSuccessed","successStyle","focusStyle","disabledStyle","shouldAutoFocus","isInputNum","index","value","className","isInputSecure","onSubmit"];function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var a=v(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,r)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}var b=function(e){return"object"===y(e)},g=function(e){s(a,e);var n=d(a);function a(e){var r;return u(this,a),h(f(r=n.call(this,e)),"getClasses",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((function(e){return!b(e)&&!1!==e})).join(" ")})),h(f(r),"getType",(function(){var e=r.props,t=e.isInputSecure,n=e.isInputNum;return t?"password":n?"tel":"text"})),h(f(r),"getAriaLabel",(function(e,t){var n=r.props.ariaLabelOverride;return n||"".concat(0===e?"Please enter verification code. ":"").concat(t?"Digit":"Character"," ").concat(e+1)})),r.input=t.default.createRef(),r}return l(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focus,r=e.shouldAutoFocus,n=this.input.current;n&&t&&r&&n.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.focus,r=this.input.current;e.focus!==t&&r&&t&&(r.focus(),r.select())}},{key:"render",value:function(){var e=this.props,n=e.placeholder,a=e.separator,u=e.isLastChild;e.ariaLabelOverride;var c=e.shouldRender,l=e.inputStyle,s=e.focus,p=e.isDisabled,d=e.hasErrored,f=e.errorStyle,v=e.isSuccessed,h=e.successStyle,y=e.focusStyle,g=e.disabledStyle;e.shouldAutoFocus;var m=e.isInputNum,O=e.index,I=e.value,S=e.className;e.isInputSecure,e.onSubmit;var w=i(e,r);return t.default.createElement("div",{className:S,style:{display:"flex",alignItems:"center"}},t.default.createElement("input",o({"aria-label":this.getAriaLabel(O,m),style:Object.assign({width:"1em",textAlign:"center",padding:0},b(l)&&l,s&&b(y)&&y,p&&b(g)&&g,d&&!v&&b(f)&&f,v&&!d&&b(h)&&h),placeholder:n,className:this.getClasses(l,s&&y,p&&g,d&&!v&&f,v&&!d&&h),type:this.getType(),ref:this.input,disabled:p,value:I||""},w)),!u&&c&&a)}}]),a}(t.PureComponent),m=function(e){s(n,e);var r=d(n);function n(){var e;u(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return h(f(e=r.call.apply(r,[this].concat(i))),"state",{activeInput:0}),h(f(e),"getOtpValue",(function(){return e.props.value?e.props.value.toString().split(""):[]})),h(f(e),"getPlaceholderValue",(function(){var t=e.props,r=t.placeholder,n=t.numInputs;if("string"==typeof r){if(r.length===n)return r;r.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}})),h(f(e),"handleOtpChange",(function(t){(0,e.props.onChange)(t.join(""))})),h(f(e),"isInputValueValid",(function(t){return(e.props.isInputNum?!isNaN(parseInt(t,10)):"string"==typeof t)&&1===t.trim().length})),h(f(e),"focusInput",(function(t){var r=e.props.numInputs,n=Math.max(Math.min(r-1,t),0);e.setState({activeInput:n})})),h(f(e),"focusNextInput",(function(){var t=e.state.activeInput;e.focusInput(t+1)})),h(f(e),"focusPrevInput",(function(){var t=e.state.activeInput;e.focusInput(t-1)})),h(f(e),"changeCodeAtFocus",(function(t){var r=e.state.activeInput,n=e.getOtpValue();n[r]=t[0],e.handleOtpChange(n)})),h(f(e),"handleOnPaste",(function(t){t.preventDefault();var r=e.state.activeInput,n=e.props,a=n.numInputs;if(!n.isDisabled){for(var o=e.getOtpValue(),i=r,u=t.clipboardData.getData("text/plain"),c=(e.props.isInputNum?u.replace(/\D/g,""):u).slice(0,a-r).split(""),l=0;l<a;++l)l>=r&&c.length>0&&(o[l]=c.shift(),i++);e.setState({activeInput:i},(function(){e.focusInput(i),e.handleOtpChange(o)}))}})),h(f(e),"handleOnChange",(function(t){var r=t.target.value;e.isInputValueValid(r)&&e.changeCodeAtFocus(r)})),h(f(e),"handleOnKeyDown",(function(t){8===t.keyCode||"Backspace"===t.key?(t.preventDefault(),e.changeCodeAtFocus(""),e.focusInput(e.state.activeInput-1)):46===t.keyCode||"Delete"===t.key?(t.preventDefault(),e.changeCodeAtFocus("")):37===t.keyCode||"ArrowLeft"===t.key?(t.preventDefault(),e.focusPrevInput()):39===t.keyCode||"ArrowRight"===t.key?(t.preventDefault(),e.focusNextInput()):32===t.keyCode||" "===t.key||"Spacebar"===t.key||"Space"===t.key?t.preventDefault():13!==t.keyCode&&"Enter"!==t.key||e.props.onSubmit()})),h(f(e),"handleOnInput",(function(t){var r=t.target.value;if(t.target.value)if(t.target.value&&t.target.value.length>1){t.preventDefault();for(var n=e.props.numInputs,a=e.state.activeInput,o=e.getOtpValue(),i=t.target.value.slice(0,n-a).split(""),u=0;u<n;++u)u>=a&&i.length>0&&(o[u]=i.shift());e.handleOtpChange(o),e.focusInput(e.props.numInputs)}else if(r&&r.trim().length>1)t.clipboardData={getData:function(){return r.trim()}},e.handleOnPaste(t);else if(e.isInputValueValid(t.target.value))e.focusNextInput();else if(!e.props.isInputNum){var c=t.nativeEvent;null===c.data&&"deleteContentBackward"===c.inputType&&(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput())}})),h(f(e),"renderInputs",(function(){for(var r=e.state.activeInput,n=e.props,a=n.id,i=n.autoComplete,u=n.numInputs,c=n.inputStyle,l=n.focusStyle,s=n.separator,p=n.separateAfter,d=void 0===p?1:p,f=n.isDisabled,v=n.disabledStyle,h=n.hasErrored,y=n.errorStyle,b=n.isSuccessed,m=n.successStyle,O=n.shouldAutoFocus,I=n.isInputNum,S=n.isInputSecure,w=n.className,k=n.inputProps,x=n.onSubmit,_=[],j=e.getOtpValue(),C=e.getPlaceholderValue(),E=e.props["data-cy"],P=e.props["data-testid"],D=e.props["custom-test-attr"],A=e.props["custom-test-id"],N=function(n){var p=void 0;p=(n+1)%parseInt(d)==0;var N={};D&&(N[D]=A&&"".concat(A,"-").concat(n));var T={};k&&(Array.isArray(k)?k[n]&&(T=k[n]):T=k),_.push(t.default.createElement(g,o({id:a&&"".concat(a,"-").concat(n),autoComplete:null!=i?i:"off",placeholder:C&&C[n],key:n,index:n,focus:r===n,value:j&&j[n],onChange:e.handleOnChange,onKeyDown:e.handleOnKeyDown,onInput:e.handleOnInput,onPaste:e.handleOnPaste,onFocus:function(t){e.setState({activeInput:n}),t.target.select()},onBlur:function(){return e.setState({activeInput:-1})},separator:s,inputStyle:c,focusStyle:l,isLastChild:n===u-1,isDisabled:f,disabledStyle:v,hasErrored:h,errorStyle:y,isSuccessed:b,successStyle:m,shouldAutoFocus:O,isInputNum:I,isInputSecure:S,className:w,"data-cy":E&&"".concat(E,"-").concat(n),"data-testid":P&&"".concat(P,"-").concat(n),shouldRender:p,onSubmit:x},T,N)))},T=0;T<u;T++)N(T);return _})),e}return l(n,[{key:"componentDidUpdate",value:function(){var e=this.props.value,t=this.state.activeInput;""==e&&t>0&&this.setState({activeInput:0})}},{key:"render",value:function(){var e=this.props.containerStyle;return t.default.createElement("div",{style:Object.assign({display:"flex"},b(e)&&e),className:b(e)?"":e},this.renderInputs())}}]),n}(t.Component);h(m,"defaultProps",{numInputs:4,onChange:function(e){return console.log(e)},isDisabled:!1,shouldAutoFocus:!1,value:"",isInputSecure:!1,onSubmit:function(e){return console.log(e)}});var O=m;e.default=O}(D),e("O",a(D));const A=({email:e})=>{const{data:t}=m(),[r,{isLoading:a}]=g(),{enqueueSnackbar:I}=o(),{t:S}=i(),[w,k]=s.useState(!1),[x,_]=n.useState(0);return n.useEffect((()=>{if(x>0){const e=setTimeout((()=>_(x-1)),1e3);return()=>clearTimeout(e)}}),[x]),e.split("@")[1],p(d,{children:[u(c,{position:"end",children:u(O,{"aria-label":"send email code",onClick:()=>k(!0),edge:"end",color:"secondary",disabled:a||x>0,sx:{backgroundColor:"rgba(51, 102, 255, 0.9)",color:"white","&:hover":{backgroundColor:"rgba(51, 102, 255, 1)"},padding:1.5},children:x>0?`${x}s`:u(l,{})})}),p(f,{open:w,onClose:()=>k(!1),children:[u(v,{children:u(h,{i18nKey:"auth.captcha.title",children:"Captcha"})}),u(y,{children:u(P,{sitekey:t?.recaptcha_site_key,onVerify:t=>{r({email:e,recaptcha_data:t}).unwrap().then((()=>{I(S("auth.captcha.success"),{variant:"success"}),b.event("send_email_verify",{category:"auth",label:"send_email_verify",email:e,success:!0})})).catch((t=>{console.error(t),I(S("auth.captcha.error"),{variant:"error"}),b.event("send_email_verify",{category:"auth",label:"send_email_verify",email:e,success:!1,error:t})})).finally((()=>{k(!1)}))},onError:()=>{I(S("auth.captcha.error"),{variant:"error"})}})})]})]})};e("S",(({email:e})=>{const[t,{isLoading:r}]=g(),{data:a}=m(),{enqueueSnackbar:s}=o(),{t:p}=i(),[d,f]=n.useState(0);n.useEffect((()=>{if(d>0){const e=setTimeout((()=>f(d-1)),1e3);return()=>clearTimeout(e)}}),[d]);const{data:v}=m(),h=e.split("@")[1],y=()=>{v?.email_whitelist_suffix&&Array.isArray(v.email_whitelist_suffix)&&!v.email_whitelist_suffix.includes(h)?s(p("auth.captcha.white_email"),{variant:"error"}):(console.log("send email code"),t({email:e}).unwrap().then((()=>{s(p("auth.captcha.success"),{variant:"success"}),f(60)})).catch((e=>{console.error(e),s(p("auth.captcha.error"),{variant:"error"})})))};return 1===a?.is_recaptcha?u(A,{email:e}):u(c,{position:"end",children:u(O,{"aria-label":"send email code",onClick:y,edge:"end",color:"secondary",disabled:r||d>0,sx:{backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"rgba(51, 102, 255, 0.9)"},padding:1.5},children:d>0?`${d}s`:u(l,{})})})})),e("a",(e=>e<2?{label:"Poor",color:"error.main"}:e<3?{label:"Weak",color:"warning.main"}:e<4?{label:"Normal",color:"warning.dark"}:e<5?{label:"Good",color:"success.main"}:e<6?{label:"Strong",color:"success.dark"}:{label:"Poor",color:"error.main"})),e("s",(e=>{let t=0;return e.length>5&&(t+=1),e.length>7&&(t+=1),(e=>new RegExp(/[0-9]/).test(e))(e)&&(t+=1),(e=>new RegExp(/[!#@$%^&*)(+=._-]/).test(e))(e)&&(t+=1),(e=>new RegExp(/[a-z]/).test(e)&&new RegExp(/[A-Z]/).test(e))(e)&&(t+=1),t}))}}}));
