import{r as h}from"./vendor.7b4e3a5ce4ba.chunk.js";import{k as w}from"./index.44dd358e3964.js";const m=d=>{const{data:e,refetch:t}=w(),{onExpired:a,refreshPageOnExpired:r=!1}=d||{};h.useEffect(()=>{if(!(e!=null&&e.subscribe_url)||!(e!=null&&e.plan_id)||!(e!=null&&e.expired_at)||e.expired_at<=Math.floor(Date.now()/1e3))return;let l=!1;const c=async()=>{try{(await fetch(e.subscribe_url,{method:"GET"})).status===403&&!l&&(t(),a==null||a(),r&&window.location.reload())}catch(_){}};c();const s=window.setInterval(c,6e4);return()=>{l=!0,window.clearInterval(s)}},[e==null?void 0:e.subscribe_url,e==null?void 0:e.plan_id,e==null?void 0:e.expired_at,t,a,r])};export{m as u};
