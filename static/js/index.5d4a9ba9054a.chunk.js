import{n as C,j as t,i as o,ah as p,T as b,B as k,h as Z,aj as L,F as P,bh as x,bl as $,bm as O,l as Y,bn as A,bG as E,bW as B,bo as R,r as D,aa as J,bi as K,ba as tt,bX as it,bY as et,bc as nt,bA as at,a9 as ot,b8 as rt,ar as G,av as N,ai as j,bC as ct,bZ as st,aI as T}from"./vendor.7b4e3a5ce4ba.chunk.js";import{m as z,B as S,M as F,C as lt,g as H,D as dt,E as vt,F as mt,b as ut}from"./index.44dd358e3964.js";import{F as Q,c as V,d as ht,e as U,a as q}from"./formik.esm.cd9d2689e596.chunk.js";import{D as wt}from"./DataGrid.a6a07ce6b8c1.chunk.js";const X=z()(i=>({root:{},form:{backgroundColor:"transparent"}})),yt=()=>{var r,m;const{t:i}=C(),{data:e}=S(),[l]=lt(),{classes:v}=X();Z();const[y,{setLeft:n,setRight:c}]=L(!1);return o(P,{children:[t(x,{variant:"contained",onClick:c,children:i("invite.my-invite.invitation-card.transfer-button")}),o($,{open:y,onClose:n,fullWidth:!0,children:[t(O,{children:i("invite.my-invite.invitation-card.transfer-dialog.title")}),t(Q,{initialValues:{transfer_amount:0},validationSchema:V().shape({transfer_amount:ht().min(.01,i("invite.my-invite.invitation-card.transfer-dialog.validation_min",{count:.1}).toString()).max(((r=e==null?void 0:e.stat[4])!=null?r:0)/100,i("invite.my-invite.invitation-card.transfer-dialog.validation_max",{count:((m=e==null?void 0:e.stat[4])!=null?m:0)/100}).toString()).required(i("invite.my-invite.invitation-card.transfer-dialog.validation_required").toString())}),onSubmit:async(f,{setSubmitting:u,setErrors:a,setStatus:h})=>{try{u(!0),await l(f.transfer_amount*100).unwrap(),h({success:!0}),n()}catch(s){a(Y.isEmpty(s.errors)?{transfer_amount:s.message}:s.errors),h({success:!1})}finally{u(!1)}},children:({values:f,handleChange:u,handleBlur:a,handleSubmit:h,isSubmitting:s,errors:w,touched:g})=>{var d;return o(k,{component:U,onSubmit:h,className:v.form,children:[t(A,{children:o(p,{spacing:3,children:[t(E,{severity:"info",children:i("invite.my-invite.invitation-card.transfer-dialog.info",{siteName:H.title})}),t(B,{id:"total-amount",type:"number",disabled:!0,fullWidth:!0,value:((d=e==null?void 0:e.stat[4])!=null?d:0)/100,label:i("invite.my-invite.invitation-card.transfer-dialog.total-amount",{context:"label"}),variant:"standard"}),t(B,{id:"transfer-amount",name:"transfer_amount",type:"number",value:f.transfer_amount,onChange:u,onBlur:a,label:i("invite.my-invite.invitation-card.transfer-dialog.transfer-amount",{context:"label"}),fullWidth:!0,disabled:s,helperText:w.transfer_amount&&g.transfer_amount?w.transfer_amount:void 0,error:!!(g.transfer_amount&&w.transfer_amount),variant:"standard"})]})}),o(R,{children:[t(x,{onClick:n,children:i("invite.my-invite.invitation-card.transfer-dialog.cancel-button")}),t(x,{type:"submit",variant:"contained",disabled:s,children:i("invite.my-invite.invitation-card.transfer-dialog.confirm-button")})]})]})}})]})]})},ft=()=>{var a;const[i,e]=D.useState(!0),[l,{setLeft:v,setRight:y}]=L(!1),{t:n}=C(),{data:c}=S(),{data:r}=dt(void 0,{skip:i}),[m]=vt(),f=J(),{classes:u}=X();return o(P,{children:[t(x,{variant:"outlined",onClick:()=>{y(),e(!1)},children:n("invite.my-invite.invitation-card.withdraw-button")}),o($,{open:l,onClose:v,fullWidth:!0,children:[t(O,{children:n("invite.my-invite.invitation-card.withdraw-dialog.title")}),t(Q,{initialValues:{withdraw_method:(a=r==null?void 0:r.withdraw_methods[0])!=null?a:"",withdraw_account:""},validationSchema:V().shape({withdraw_method:q().required(n("invite.my-invite.invitation-card.withdraw-dialog.validation_required",{name:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-method",{context:"label"})}).toString()),withdraw_account:q().required(n("invite.my-invite.invitation-card.withdraw-dialog.validation_required",{name:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-account",{context:"label"})}).toString())}),onSubmit:async(h,{setSubmitting:s,setErrors:w,setStatus:g})=>{try{await m(h).unwrap(),g({success:!0}),f("/ticket"),v()}catch(d){w(Y.isEmpty(d.errors)?{withdraw_account:d.message}:d.errors),g({success:!1})}finally{s(!1)}},children:({values:h,handleChange:s,handleBlur:w,handleSubmit:g,isSubmitting:d,errors:_,touched:I})=>{var W;return o(k,{component:U,onSubmit:g,className:u.form,children:[t(A,{children:o(p,{spacing:3,children:[t(E,{severity:"info",color:"info",children:n("invite.my-invite.invitation-card.withdraw-dialog.info",{siteName:H.title,amount:((W=c==null?void 0:c.stat[4])!=null?W:0)/100})}),o(K,{fullWidth:!0,variant:"standard",children:[t(tt,{id:"select-payment-label",children:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-method",{context:"label"})}),t(it,{labelId:"select-payment-label",id:"select-payment",name:"withdraw_method",value:h.withdraw_method,label:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-method",{context:"label"}),onChange:s,onBlur:w,disabled:d,children:r==null?void 0:r.withdraw_methods.map(M=>t(et,{value:M,children:M},M))}),_.withdraw_method&&I.withdraw_method&&t(nt,{error:!0,children:_.withdraw_method})]}),t(B,{id:"withdraw-account",name:"withdraw_account",type:"text",value:h.withdraw_account,onChange:s,onBlur:w,label:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-account",{context:"label"}),fullWidth:!0,disabled:d,helperText:_.withdraw_account&&I.withdraw_account?_.withdraw_account:void 0,error:!!(I.withdraw_account&&_.withdraw_account),variant:"standard"})]})}),o(R,{children:[t(x,{onClick:v,children:n("invite.my-invite.invitation-card.withdraw-dialog.cancel-button")}),t(x,{type:"submit",variant:"contained",disabled:d,children:n("invite.my-invite.invitation-card.withdraw-dialog.confirm-button")})]})]})}})]})]})},gt=()=>{var l;const{t:i}=C(),{data:e}=S();return t(F,{title:i("invite.my-invite.invitation-card.title"),sx:{height:240},children:o(p,{spacing:2,children:[o(p,{direction:"row",spacing:2,alignItems:"flex-end",children:[t(b,{variant:"h2",component:"span",children:Number(((l=e==null?void 0:e.stat[4])!=null?l:0)/100).toFixed(2)}),t(b,{variant:"h6",component:"span",color:"textSecondary",children:i("invite.my-invite.invitation-card.currency")})]}),o(k,{children:[t(b,{variant:"subtitle1",children:i("invite.my-invite.invitation-card.description")}),t(b,{variant:"body2",color:"textSecondary",noWrap:!0,children:i("invite.my-invite.invitation-card.helperText")})]}),o(p,{direction:"row",spacing:2,children:[t(yt,{}),t(ft,{})]})]})})},pt=z()(i=>({root:{height:i.spacing(30),display:"flex",flexDirection:"column","& .MuiCardContent-root":{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"}}})),bt=()=>{const{t:i}=C(),{data:e,isLoading:l}=S(),v=D.useMemo(()=>{var n,c,r,m;return[{label:i("invite.my-invite.info-card.user-register-count"),value:i("invite.my-invite.info-card.user-register-count-value",{count:(n=e==null?void 0:e.stat[0])!=null?n:0})},{label:i("invite.my-invite.info-card.commission-rate"),value:i("invite.my-invite.info-card.commission-rate-value",{rate:(c=e==null?void 0:e.stat[3])!=null?c:0})},{label:i("invite.my-invite.info-card.commission-confirming"),value:i("invite.my-invite.info-card.commission-confirming-value",{count:((r=e==null?void 0:e.stat[2])!=null?r:0)/100})},{label:i("invite.my-invite.info-card.commission-total"),value:i("invite.my-invite.info-card.commission-total-value",{count:((m=e==null?void 0:e.stat[1])!=null?m:0)/100})}]},[e,i]),{classes:y}=pt();return t(F,{title:i("invite.my-invite.info-card.title"),className:y.root,children:t(p,{spacing:2,children:v.map((n,c)=>l?t(at,{variant:"text",width:"100%"},c):o(p,{direction:"row",justifyContent:"space-between",children:[t(b,{variant:"body1",children:n.label}),t(b,{variant:"body1",children:n.value})]},c))})})},xt=()=>{var u;const{t:i}=C(),{data:e,isLoading:l}=S(),[v,{isLoading:y}]=mt(),{enqueueSnackbar:n}=ot(),[c,r]=rt.useState(10),m=()=>{v().unwrap().then(()=>{n(i("notice::generate-invite-codes_success"),{variant:"success"})}).catch(a=>{console.error(a),n(i("notice::generate-invite-codes_failed"),{variant:"error"})})},f=D.useMemo(()=>[{field:"code",headerName:i("invite.my-invite.invite-codes-table.code",{context:"header"}).toString(),description:i("invite.my-invite.invite-codes-table.code",{context:"description"}).toString(),maxWidth:160,type:"string"},{field:"created_at",headerName:i("invite.my-invite.invite-codes-table.created_at",{context:"header"}).toString(),description:i("invite.my-invite.invite-codes-table.created_at",{context:"description"}).toString(),width:200,type:"dateTime",valueGetter:({value:a})=>G.unix(a).toDate(),valueFormatter:({value:a})=>G(a).format("YYYY-MM-DD HH:mm:ss")},{field:"actions",headerName:i("invite.my-invite.invite-codes-table.actions",{context:"header"}).toString(),type:"actions",getActions:a=>[t(N,{title:i("invite.my-invite.invite-codes-table.action-copy",{context:"tooltip"}).toString(),children:t(j,{onClick:()=>{window.navigator.clipboard.writeText("".concat(window.location.protocol,"//").concat(window.location.host,"/register?code=").concat(a.row.code)).then(()=>{n(i("notice::copy_success"),{variant:"success"})})},children:t(ct,{})})},"copy")]}],[e,i]);return t(F,{content:!1,title:i("invite.my-invite.invite-codes-table.title"),secondary:t(N,{title:i("invite.my-invite.invite-codes-table.generate_tooltip"),placement:"left",children:t(j,{onClick:m,disabled:y,children:t(st,{})})}),children:t(k,{height:{xs:400,md:500},children:t(wt,{columns:f,rows:(u=e==null?void 0:e.codes)!=null?u:[],rowsPerPageOptions:[10,20,50],pageSize:c,onPageSizeChange:a=>r(a),loading:l,getRowId:a=>a.code})})})},_t=()=>o(T,{container:!0,spacing:2,children:[t(T,{item:!0,xs:12,md:6,children:t(gt,{})}),t(T,{item:!0,xs:12,md:6,children:t(bt,{})}),t(T,{item:!0,xs:12,children:t(xt,{})})]}),It=()=>(ut("invite"),t(_t,{}));export{It as default};
