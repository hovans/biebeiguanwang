System.register(["./vendor-legacy.92ff5d757b54.chunk.js","./constate.es-legacy.903b766c8c51.chunk.js","./plan-legacy.e3badb7c7cb5.chunk.js","./Cancel-legacy.c600af36aaff.chunk.js","./index-legacy.104de674e3dc.js","./index.es-legacy.ecd72c1e5a31.chunk.js","./Masonry-legacy.86e39fdc6adf.chunk.js"],(function(e,r){"use strict";var n,t,i,a,c,o,l,s,d,u,p,m,h,y,b,g,f,w,x,v,k,P,_,j,N,S,O,T,C,A,D,F,I,M,R;return{setters:[e=>{n=e.bM,t=e.r,i=e.h,a=e.a3,c=e.aj,o=e.l,l=e.i,s=e.F,d=e.j,u=e.B,p=e.T,m=e.bA,h=e.n,y=e.aa,b=e.ah,g=e.bh,f=e.bl,w=e.bm,x=e.bn,v=e.bo},e=>{k=e.c},e=>{P=e.P},e=>{_=e.p,j=e.g,N=e.a,S=e.b,O=e.d,T=e.c},e=>{C=e.p,A=e.M,D=e.k,F=e.m,I=e.b},e=>{M=e.E},e=>{R=e.M}],execute:function(){const[r,E]=k((()=>{const[e,{add:r,remove:o,reset:l}]=n([P.PERIOD,P.TRAFFIC]),[s,{add:d,remove:u,reset:p}]=n(_),[m,h]=t.useState(""),y=i(),b=a(y.breakpoints.down("md")),[g,{set:f,toggle:w}]=c(!b);return{planType:e,addPlanType:r,removePlanType:o,resetPlanType:l,togglePlanType:n=>{e.has(n)?o(n):r(n)},keyword:m,setKeyword:h,drawerOpen:g,setDrawerOpen:f,toggleDrawer:w,paymentAllow:s,addPayment:d,removePayment:u,resetPayment:p,togglePayment:e=>{s.has(e)?u(e):d(e)}}})),$=()=>l(A,{title:d(m,{variant:"text",width:200}),children:[d(m,{variant:"rectangular",width:"100%",height:100}),d(m,{variant:"text",width:200}),d(m,{variant:"text",width:160}),d(m,{variant:"text",width:160}),d(m,{variant:"text",width:200})]}),z=({product:e})=>{const{t:r}=h(),n=y(),[i,a]=t.useState(!1),{data:c}=D(),u=t.useMemo((()=>{const n=N(e);if(!n)return{price:0,mode:"null"};const t=r("subscription.buy.product-card.price-mode",{context:n}).toString();return{price:S(e,n),mode:t}}),[]),m=()=>{a(!1)},k=t.useMemo((()=>{try{return JSON.parse(e.content).map(((e,r)=>l(b,{direction:"row",alignItems:"center",spacing:1,children:[e.support?d(O,{color:"success"}):d(T,{color:"error"}),d(p,{variant:"body2",color:"textPrimary",children:e.feature})]},r)))}catch(r){return d(M,{children:e.content})}}),[e.content]);return l(s,{children:[d(A,{title:e.name,secondary:d(p,{variant:"caption",color:"textSecondary",children:r("subscription.buy.product-card.price-mode",{context:u.mode,defaultValue:u.mode}).toString()}),children:l(b,{direction:"column",spacing:2,children:[d(p,{variant:"h3",component:"h2",color:"textPrimary",children:"￥ "+o.ceil(u.price/100,2).toFixed(2)}),d("div",{children:k}),d(g,{variant:"contained",color:"primary",href:`/plan/buy/${e.id}`,onClick:r=>{r.preventDefault(),c?.plan_id&&c.plan_id!==e.id?a(!0):n(`/plan/buy/${e.id}`)},children:r("subscription.buy.product-card.buy-button").toString()})]})}),l(f,{open:i,onClose:m,children:[d(w,{children:r("subscription.buy.product-card.confirm.title")}),d(x,{children:d(p,{children:r("subscription.buy.product-card.confirm.message")})}),l(v,{children:[d(g,{onClick:m,children:r("subscription.buy.product-card.confirm.cancel")}),d(g,{onClick:()=>{a(!1),n(`/plan/buy/${e.id}`)},color:"primary",variant:"contained",children:r("subscription.buy.product-card.confirm.confirm")})]})]})]})},B=()=>{const{drawerOpen:e,keyword:r,planType:n,paymentAllow:i}=E(),{data:a,isLoading:c}=C(),m=t.useMemo((()=>a?.filter((e=>1===e.show)).filter((e=>e.name.includes(r)||e.content.includes(r))).filter((e=>{if(n.has(P.PERIOD)||n.has(P.TRAFFIC)){const r=o.isNumber(e.month_price)||o.isNumber(e.year_price)||o.isNumber(e.quarter_price)||o.isNumber(e.half_year_price)||o.isNumber(e.two_year_price)||o.isNumber(e.three_year_price),n=o.isNumber(e.onetime_price);return r||n}return!1})).filter((e=>new Set(Array.from(Object.keys(j(e))).filter((e=>i.has(e)))).size>0))||[]),[a,r,n,i]);return l(s,{children:[c||0!==m.length&&l(R,{spacing:2,columns:{xs:1,sm:e?1:2,md:e?2:3,lg:e?3:4},children:[c&&Array.from({length:6}).map(((e,r)=>d($,{},r))),m.map((e=>d(z,{product:e},e.id)))]}),!c&&0===m.length&&d(u,{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",my:4,children:d(p,{component:"span",variant:"h4",color:"textSecondary",children:"No Product Found"})})]})},L=F()(((e,{open:r})=>({root:{display:"flex",flexDirection:"row"},main:{width:"100%",[e.breakpoints.up("sm")]:{marginLeft:r?0:-280,transition:e.transitions.create("margin",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}}))),q=()=>{const{drawerOpen:e}=E(),{classes:r}=L({open:e});return l(s,{children:[d(u,{children:d(p,{sx:{color:"red",fontWeight:"bold"},children:"注意：一个账号只能购买一个套餐，购买相同套餐为续费，增加时长，重置日自动重置流量。续费不会马上重置流量。提前用完流量请购买流量重置包。当月未使用完流量不累计到下个月。"})}),d(u,{marginBottom:2}),d(u,{className:r.root,children:d(b,{component:"main",spacing:2,className:r.main,children:d(B,{})})})]})};e("default",(()=>(I("buy-plan"),d(r,{children:d(q,{})}))))}}}));
